import sys
import time
import unittest
import numpy as np

from src import ord, d


class TestUtil(unittest.TestCase):

    def test_ord(self):
        start = time.time()
        seq = [9767.5,9758.0,9776.5,9790.5,9772.5,9765.0,9784.5,9801.0,9811.5,9826.5
                ,9737.0,9726.0,9696.0,9660.0,9666.0,9669.0,9662.5,9658.0,9674.0,9672.5
                ,9662.0,9674.0,9673.5,9681.5,9673.5,9666.5,9669.5,9677.0,9679.5,9685.5
                ,9686.0,9675.0,9669.0,9670.0,9677.5,9687.0,9682.0,9665.5,9655.0,9650.5
                ,9651.5,9651.0,9647.0,9667.0,9674.5,9688.5,9672.0,9675.5,9653.0,9655.
                ,9668.0,9670.0,9677.5,9695.0,9691.5]
        sort_seq = np.sort(seq)[::-1]
        idx = 37
        itv = 55
        ret = ord(seq, sort_seq, idx, itv)
        print(f"{sys._getframe().f_code.co_name} exec time : {time.time() - start}")
        assert 44 == ret

    def test_d(self):
        start = time.time()
        seq = [9767.5,9758.0,9776.5,9790.5,9772.5,9765.0,9784.5,9801.0,9811.5,9826.5
                ,9737.0,9726.0,9696.0,9660.0,9666.0,9669.0,9662.5,9658.0,9674.0,9672.5
                ,9662.0,9674.0,9673.5,9681.5,9673.5,9666.5,9669.5,9677.0,9679.5,9685.5
                ,9686.0,9675.0,9669.0,9670.0,9677.5,9687.0,9682.0,9665.5,9655.0,9650.5
                ,9651.5,9651.0,9647.0,9667.0,9674.5,9688.5,9672.0,9675.5,9653.0,9655.
                ,9668.0,9670.0,9677.5,9695.0,9691.5]
        itv = 55
        ret = d(seq, itv)
        print(f"{sys._getframe().f_code.co_name} exec time : {time.time() - start}")
        assert 14020.0 == ret